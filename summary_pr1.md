## Создание пакета

```npm init``` в той директории, где будет код -->

--> создаетя файл ```package.json``` (JSON - JS Object Notation - текстовый формат обмена данными)

В ```package.json``` нужно самостоятельно добавить секцию ```"type": "module"```,
она нужна, чтобы работали импорты.

[Валидатор](jsonlint.com) - проверяет ошибки, в тч орфографические, в ```package.json```.


##  Зависимости

Во время запуска кода всеб что импортируется, должно быть установлено локально в директорию  ```node_modules```, лежащую в корне проекта:

```npm install``` без флага глобальной установки ```-g``` и ```sudo``` -->

--> **npm** создаст файл ```package-log.json```.  

Кроме *обычных* зависимостей **npm** *отдельно* обрабатывает зависимости, необходимые только *во время разработки* (например тестовые фреймворки).

Установка: ```npm install --save-dev jest ``` -->

--> Благодаря параметру  ```--save-dev```зависимость
     - добавляется в секцию  ```devDependencies``` файла ```package.json```;
     - никак не используется при публикации проекта.

--> При такой установке зависимость также устанавливается в  ```node_modules``` и импортируется внутри кода как и любой другой модуль.

```
"devDependencies": {
  "jest": "^24.9.0",
}
```  
Значок ```^```:
- допускается установка более высокой версии,
- разрешены совместные обновления.

Значок ```~```:
- допускается только обновление патча

Сами **зависимости не хранятся** в ```git```- репозитрии
и должны быть добавлены в ```.gitignore```.  

В *свежесклонированном репозитории* директория  ```node_modules```  отсутствует,  
поэтому необходимо выполнить команду ```npm install``` **без аргументов**.
Она выполнитт установку пакетов, указанных в ```package.json```.

### Глобальная и локальная установка пакетов, NPX

Если установить пакет  **глобально**, зависимости не будут установлены при первоначальной настройке пакета: выполнение команды ```npm install``` в *свежесклонированном* репозитории не поставит нужный пакет (например eslint) автоматически, всем разработчикам прийдется добавлять его *вручную*.  

При **локальной** установке пакетов путь к нему **не попадает** в переменную окружения ```$PATH```, то есть этот пакет не получится запустить из командной строки.  
Поэтому локально установленные пакеты запускаются с помощью **npx**  - утилиты, поставляемой с **npm** 5.2.0 и выше.  
Пример: ```$ npx jest```.  

## Произвольные команды (scripts)

В ```package.json``` можно добавить секцию
```
"scripts": {
  "test":  "jest",
  "sloc": "sloc",
  ...
}
```
Имя *свойства* используется как команда в командной строке,  
*значение* — исполняемая программа.

Теперь по команде ```npm run slock``` запустится утилита slock.

Некоторые свойства в ```scripts``` имеют особое значение, например:  
```publish, test, stop, start, restart```
- для их запуска достаточно команды **без** *run*, например ```npm test```.

### Hooks
NPM запускает некоторые *предопределенные* свойства scripts автоматически.
[Подробнее](https://docs.npmjs.com/misc/scripts)

## Babel

[online REPL](https://babeljs.io/repl)
[О babel на hexlet'e](https://ru.hexlet.io/courses/js-setup-environment/lessons/babel/theory_unit)
[О транспайлинге и source map или маппинге на hexlet'e](https://ru.hexlet.io/courses/js-setup-environment/lessons/source-map/theory_unit)
